<!DOCTYPE html><html lang="en-US" class="no-js"><head>

    <title>Главная</title>
    <link rel="icon" type="image/x-icon" href="{{ asset('img/ico/rpop_icon.png') }}">
    <!-- Meta Data -->
    <meta http-equiv="content-type" content="text/html;charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content>
    <meta name="keywords" content>
    <meta name="author" content="mtb-spo.online">
    <meta charset="UTF-8">

    <!-- CSS Global Compulsory -->
    <link rel="stylesheet" href="{{ asset('landing/css/bootstrap.min.css')}}">
    <link rel="stylesheet" href="{{ asset('landing/css/style.css')}}">

    <!-- CSS Implementing Plugins -->
    <link rel="stylesheet" href="{{ asset('landing/css/jquery.fullpage.min.css')}}">
    <link rel="stylesheet" href="{{ asset('landing/css/slick.min.css')}}">
    <link rel="stylesheet" href="{{ asset('landing/css/font-awesome.min.css')}}">
    <link rel="stylesheet" href="{{ asset('landing/css/ionicons.min.css')}}">
    <link rel="stylesheet" href="{{ asset('landing/css/animate.min.css')}}">
    <link rel="stylesheet" href="{{ asset('landing/css/magnific-popup.css')}}">
    <link rel="stylesheet" href="{{ asset('landing/css/vegas.min.css')}}">
    <link rel="stylesheet" href="{{ asset('landing/css/photoswipe.css')}}">
    <link rel="stylesheet" href="{{ asset('landing/css/default-skin.css')}}">

    <link rel="stylesheet" href="{{ asset('landing/css/custom.css')}}">

    <link href="{{ asset('css/style_start_landing.css') }}" rel="stylesheet">
    <link href="{{ asset('css/my_style.css') }}" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]-->

    <!--[if lt IE 11]>
    <link rel="stylesheet" type="text/css" href="css/ie.css">
    <![endif]-->

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:200,300,300i,400,400i,700,700i%7CMontserrat:300,400,500" rel="stylesheet">

    <!-- JS -->
    <script type="text/javascript" src="{{ asset('landing/js/modernizr.js') }}"></script>

    <style>
        @font-face {
            font-family: Montserrat; /* Гарнитура шрифта */
            src: url({{ asset('fonts/Montserrat-Regular.ttf') }}); /* Путь к файлу со шрифтом */
        }
        * {
            font-family: Montserrat;
        }
        .error{
            color: red;
        }
        #form-success{
            color:white;
            height:100px;
            background-color: #51a154;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 16pt
        }

        #year-select{
            background-color: #ffffff;
            color: #000000;

        }
        #hint-region {
            /*display: none;*/
            position: absolute;
            background-color: rgba(255, 255, 255, 0.8);
            z-index: 9999999;
            border: 1px solid black;
            padding: 24px;
            width: 280px;
            pointer-events:none;
        }
        #region-title{
            font-size: 14pt;
            font-weight: bold;
            text-align: center;
        }
        #org-list{
            list-style-type: none;
            padding: 0;
            margin: 0;
            font-size: 20px;
            text-align: center;
        }
        .org-year{
            font-size: 14pt;
            font-weight: bold;
        }
        .organization{
            margin-left: 10px;
            padding-left: 3px;
            list-style-type: '-';
        }
        .organization:first-of-type{
            font-size: 26px;
            font-weight: bold;
            list-style-type: '';
        }
        .partners-carousel-container{
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            padding: 10px;
            height: 100%;
        }
        .partners-carousel-container div{

        }
        .partners-carousel-container img{
            /*border: 1px solid black;*/
            max-width: 250px;
            height: auto;

        }

        @media screen and (max-width: 992px){
            #hint-region {
                display: none;
                position: absolute;
                background-color: rgba(255, 255, 255, 0.8);
                z-index: 9999999;
                border: 1px solid black;
                padding: 4px;
                width: 350px;
                pointer-events:none;
            }
            .team_scale_mobile {
                margin-right: 13%;
            }
            .partners-carousel-container{
                display: flex;
                align-items: center;
                flex-direction: row;
                flex-wrap: wrap;
            }
            .partners-carousel-container img{
                width: 100px;
                height: auto;
            }
        }

        .scale_img img { width: 400px; height: 300px; object-fit: cover; }
        .scale_img .text_scale_img { height: 180px; object-fit: cover; }

        .scale_img_partners img { width: 300px; object-fit: cover; }

        .scale_img_documents img { width: 555px; height: 350px; object-fit: cover; }
        .scale_img_documents .text_scale_img_documents { height: 35px; object-fit: cover; }

    </style>

    <script type="text/javascript" src="{{ asset('js/map/raphael-min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('js/jquery-3.1.1.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('js/map/russian-map.js') }}"></script>

</head>
<body>

<div id="preloader">
    <div id="loading-animation"></div>
</div>



<div class="main-container">

    {% include('start_landing/templates/header.html.twig') %}
    <!-- Global Overlay -->
    <div class="global-overlay zoom-onload">
        <div class="overlay">
            <div class="overlay-wrapper">
                <!-- Overlay Background -->
                <div class="overlay-inner cover-background" style="background-image: url({{ asset('img/img_start_landing/6.jpg') }});"></div>
                <div class="overlay-inner background-dark-5 opacity-30"></div>
                <div class="overlay-shape">
                    <div class="shape-container">
                        <div class="overlay-inner background-dark-5 opacity-70"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Fullpage -->
    <div id="ed-fullpage" class="ed-fullpage">

        {% include('start_landing/templates/main.html.twig') %}
        {% include('start_landing/templates/events.html.twig') %}
        {% include('start_landing/templates/map.html.twig') %}
        {% include('start_landing/templates/partners.html.twig') %}
        {% include('start_landing/templates/infrastructureSheet.html.twig') %}
        {% include('start_landing/templates/documentation.html.twig') %}
        {% include('start_landing/templates/designProject.html.twig') %}
        {% include('start_landing/templates/employees.html.twig') %}
        {% include('start_landing/templates/feedback.html.twig') %}


    </div>


    {% include('start_landing/templates/footer.html.twig') %}


    <!-- Root element of PhotoSwipe. Must have class pswp. -->
    <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

        <!-- Background of PhotoSwipe.
             It's a separate element as animating opacity is faster than rgba(). -->
        <div class="pswp__bg"></div>

        <!-- Slides wrapper with overflow:hidden. -->
        <div class="pswp__scroll-wrap">

            <!-- Container that holds slides.
                PhotoSwipe keeps only 3 of them in the DOM to save memory.
                Don't modify these 3 pswp__item elements, data is added later on. -->
            <div class="pswp__container">
                <div class="pswp__item"></div>
                <div class="pswp__item"></div>
                <div class="pswp__item"></div>
            </div>

            <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
            <div class="pswp__ui pswp__ui--hidden">

                <div class="pswp__top-bar">
                    <div class="pswp__counter"></div>
                    <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
{#                    <button class="pswp__button pswp__button--share" title="Share"></button>#}
                    <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                    <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                    <div class="pswp__preloader">
                        <div class="pswp__preloader__icn">
                            <div class="pswp__preloader__cut">
                                <div class="pswp__preloader__donut"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                    <div class="pswp__share-tooltip"></div>
                </div>

                <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>

                <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button>

                <div class="pswp__caption">
                    <div class="pswp__caption__center"></div>
                </div>
            </div>
        </div>
    </div>

</div>
<div id="hint-region">
    <div>
        <div id="region-title">Название региона</div>
        <hr>
        <div>
            <ul id="org-list">

            </ul>
        </div>
    </div>
</div>

<!-- JS -->
<script type="text/javascript" src="{{ asset('landing/js/jquery.min.js') }}"></script>
<script type="text/javascript" src="{{ asset('landing/js/bootstrap.min.js') }}"></script>
<script type="text/javascript" src="{{ asset('landing/js/plugins.js') }}"></script>
<script type="text/javascript" src="{{ asset('landing/js/photoswipe.min.js') }}"></script>
<script type="text/javascript" src="{{ asset('landing/js/photoswipe-ui-default.min.js') }}"></script>
<script type="text/javascript" src="{{ asset('landing/js/animated-gradient.js') }}"></script>

<script type="text/javascript" src="{{ asset('landing/js/main.js') }}"></script>
<script>
    $(document).ready(function () {
        let formSuccess = $('#form-success');
        formSuccess.hide();
        $('form[name="form"]').submit((event) => {
            let isValid = true;
            let fio = $('#form_FIO').val();
            let email = $('#form_email').val();
            let topic = $('#form_topic').val();
            let message = $('#form_message').val();

            if(fio === '' || email === '' || message === '' || topic === ''){
                isValid = false
            }


            if (isValid){
                $('form[name="form"]').hide();
                formSuccess.show("slow");

                return;
            }


            event.preventDefault();
        })
    })
</script>
<script>
    // запрос на получение json регионов
    window.onload = function() {
        fetch('/api/map').then(function(response) {
            response.json().then(function(data) {


                $('#year-select').change(() => {

                })
                var hint = document.getElementById('hint-region');
                data = JSON.parse(data);

                let map = new RussianMap({
                    viewPort: "-65 0 1134 620",
                    mapId: 'russian-map',
                    width: 1100,
                    height: 600,
                    // дефолтовые атрибуты для контуров регионов
                    defaultAttr: {
                        fill: '#d8d8d8', // цвет которым закрашивать
                        stroke: '#000', // цвет границы
                        'stroke-width': 0.2, // ширина границы
                        'stroke-linejoin': 'round' // скруглять углы
                    },
                    mouseMoveAttr: {
                        fill: '#7baec3',
                    },
                    onMouseMove: function(e) {
                        $('#region-title').html(this.region.name)
                        if(this.region.organization) {
                            let organization = JSON.parse(this.region.organization);
                            let year = $('#year-select option:selected').text();
                            for (var org in organization[year]) {
                                let orgSplit = organization[year][org].split(',');
                                for(let _org in orgSplit){
                                    let orgElem = "<li class='organization'>" + orgSplit[_org] + "</li>";
                                    $("#org-list").append(orgElem)
                                }

                            }

                        }
                        hint.style.display = 'inline-block';
                        if( e.pageX + hint.offsetWidth < document.body.offsetWidth ){

                            hint.style.top = e.pageY - 100 + 'px';
                            hint.style.left = e.pageX - 100 + 'px';
                        } else {
                            hint.style.top = e.pageY - 100 + 'px';
                            hint.style.left = e.pageX - hint.offsetWidth - 100 + 'px';
                        }

                    },
                    onMouseOut: function(event) {
                        hint.style.display = 'none';
                        $("#org-list").html("");
                    },
                    onMouseClick: function(event) {

                    },

                }, data);

            }).then(() => {
                window.addEventListener('resize', WinResize);
                let winWidth = document.documentElement.clientWidth;
                let winHeight = document.documentElement.clientHeight;
                let mapSVG = $('#russian-map').children('svg');

                ResizeMap();

                function ResizeMap(){
                    mapSVG.attr('width', winWidth/1.5 + 'px');
                    mapSVG.attr('height', winHeight/1.5 + 'px');
                }


                function WinResize(){
                    winWidth = document.documentElement.clientWidth;
                    winHeight = document.documentElement.clientHeight;
                    console.log(winHeight, winWidth);
                    ResizeMap();
                }
            })
        });
    };
</script>
</body></html>