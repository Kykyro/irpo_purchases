{% extends 'default/base.html.twig' %}
{% block styles %}
    <link href="{{ asset('css/plugins/blueimp/css/blueimp-gallery.min.css') }}" rel="stylesheet">
{% endblock %}
{% block content %}
    <h1>
        Карта готовности (Кластер)
    </h1>

    {% set name = zone.getName() %}
    <div class="row">
        <div class="col-lg-10 offset-lg-1 договоmb-2">
            <div class="ibox collapsed border-bottom">
                <a class="collapse-link">
                    <div class="ibox-title">
                        <h5>
                            {{ name }}
                        </h5>
                        <div class="ibox-tools">
                            <i class="fa fa-chevron-down"></i>
                        </div>
                    </div>
                </a>

                <div class="ibox-content" style="display: block;">
                    <a href="{{ path('app_region_readiness_map') }}">
                        <button class="btn mb-3">
                            <i class="fa fa-arrow-left">
                                Назад
                            </i>
                        </button>
                    </a>
                    <div class="tabs-container">
                        <ul class="nav nav-tabs" role="tablist">
                            <li><a class="nav-link active show" data-toggle="tab" href="#tab-1"> Ремонт</a></li>
                            <li><a class="nav-link" data-toggle="tab" href="#tab-2"> Инфраструктурный лист</a></li>
                        </ul>
                        <div class="tab-content">
                            <div role="tabpanel" id="tab-1" class="tab-pane active show">
                                <div class="panel-body">
                                    <div class="row">
                                        <div class="col-lg-12 mb-3">
                                            <a href="{{ path('app_region_edit_repair_zone', {'id': zone.getId()}) }}">
                                                <button class="btn btn-outline-success col-lg-12">
                                                    <i class="fa fa-edit">
                                                        Внести изминения
                                                    </i>
                                                </button>
                                            </a>
                                        </div>
                                    </div>
                                    <table class="table table-bordered">
                                        {% set repair = zone.getZoneRepair() %}


                                        <thead>
                                        <tr>
                                            <td class="col-md-1">
                                                Процент готовности
                                            </td>
                                            <td class="col-md-3">
                                                Дата окончания
                                            </td>
                                            <td>
                                                Комментарий
                                            </td>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <td>
                                                {{ repair.getTotalPercentage() }} %
                                            </td>
                                            <td>
                                                {% if repair.getEndDate() %}
                                                    {{ repair.getEndDate().format('d.m.Y') }}
                                                {% else %}
                                                    <span class="badge badge-warning">
                                                        Дата не указана
                                                    </span>
                                                {% endif %}
                                            </td>
                                            <td>
                                                {{ repair.getComment()|raw }}
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                    <h4>Процесс ремонта</h4>
                                    <hr>
                                    <h5>Общий процент <b>{{ repair.getTotalPercentage() }} %</b></h5>
                                    <div class="progress">
                                        <div class="progress-bar progress-bar-primary" role="progressbar" style="width: {{ repair.getDismaltingPercentage() }}%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"></div>
                                        <div class="progress-bar progress-bar-success" role="progressbar" style="width: {{ repair.getPlasteringAndCommunicationPercentage()  }}%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"></div>
                                        <div class="progress-bar progress-bar-warning" role="progressbar" style="width: {{ repair.getFinishingPercentage() }}%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                                        <div class="progress-bar progress-bar-danger" role="progressbar" style="width: {{ repair.getBrandingPercentage() }}%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    <hr>
                                    <h5>Демонтажные работы <b>{{ repair.getDismantling() }} %</b></h5>
                                    <div class="progress">
                                        <div class="progress-bar progress-bar-primary" style="width: {{ repair.getDismantling() }}%" role="progressbar" aria-valuenow="{{ repair.getTotalPercentage() }}" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    <h5>Штукатурные и коммуникационные работы <b>{{ repair.getPlasteringAndCommunication() }} %</b></h5>
                                    <div class="progress">
                                        <div class="progress-bar  progress-bar-success" style="width: {{ repair.getPlasteringAndCommunication() }}%" role="progressbar" aria-valuenow="{{ repair.getTotalPercentage() }}" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    <h5>Отделочные работы <b>{{ repair.getFinishing() }} %</b></h5>
                                    <div class="progress">
                                        <div class="progress-bar progress-bar-warning" style="width: {{ repair.getFinishing() }}%" role="progressbar" aria-valuenow="{{ repair.getTotalPercentage() }}" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    <h5>Брендирование <b>{{ repair.getBranding() }} %</b></h5>
                                    <div class="progress">
                                        <div class="progress-bar  progress-bar-danger" style="width: {{ repair.getBranding() }}%" role="progressbar" aria-valuenow="{{ repair.getTotalPercentage() }}" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    <hr>
                                    <h4>Фотографии</h4>
                                    <hr>
                                    <div class="row ml-1">
                                        <div class="lightBoxGallery">
                                            {% for i in 1..3 %}
                                                <div class="text-left">
                                                    <h5>
                                                        10.05.2023
                                                    </h5>
                                                </div>

                                                <a href="{{ asset('/img/img_start_landing/1.png') }}" title="{{ name }}" data-gallery="">
                                                    <img src="{{ asset('/img/img_start_landing/1.png') }}" style="width: 100px">
                                                </a>
                                                <a href="{{ asset('/img/img_start_landing/1.png') }}" title="{{ name }}" data-gallery="">
                                                    <img src="{{ asset('/img/img_start_landing/1.png') }}" style="width: 100px">
                                                </a>
                                            {% endfor %}
                                            <!-- The Gallery as lightbox dialog, should be a child element of the document body -->
                                            <div id="blueimp-gallery" class="blueimp-gallery">
                                                <div class="slides"></div>
                                                <h3 class="title"></h3>
                                                <a class="prev">‹</a>
                                                <a class="next">›</a>
                                                <a class="close">×</a>
                                                <a class="play-pause"></a>
                                                <ol class="indicator"></ol>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div role="tabpanel" id="tab-2" class="tab-pane">
                                <div class="panel-body">
                                    {{ include('default/inDevelopment.html.twig') }}
                                </div>
                            </div>
                        </div>


                    </div>
                </div>
                <div class="ibox-footer">

                </div>

            </div>
        </div>
    </div>


{% endblock %}

{% block scripts %}
    <script src="{{ asset('js/popper.min.js') }}"></script>
    <script src="{{ asset('js/inspinia.js') }}"></script>
    <script src="{{ asset('js/plugins/blueimp/jquery.blueimp-gallery.min.js') }}"></script>
{% endblock %}